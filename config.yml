templates:
  global:
    content_filter:
      reject: "*.rar"

    # Ensure Mac friendly filenames/paths
    pathscrub: mac

    quality: 720p+ hdtv+

    # Add the output plugin for Transmission
    transmission:
      netrc: /root/.netrc

    clean_transmission:
      netrc: /root/.netrc
      min_ratio: 2

  # TV shows
  tv:
    exists_series: @DOWNLOADS_ROOT@/_TV

    thetvdb_lookup: yes
    set:
      path: "@DOWNLOADS_ROOT@/_TV/{{ series_name|replace(':',' -') }}/Season {{ series_season }}/"

    configure_series:
      from:
        thetvdb_favorites:
          account_id: @TVDB_ID@
          strip_dates: yes

    discover:
      what:
        - emit_series: yes
      from:
        - torrentz: verified
        - kat:
            category: tv
            verified: yes
        - piratebay:
            category: 207 # "HD - TV"
            sort_by: seeds

  # Movies
  movies:
    exists_movie: @DOWNLOADS_ROOT@/_Movies
    seen_movies: strict

    set:                                                                                                               
      path: @DOWNLOADS_ROOT@/_Movies   

    movie_queue: yes

    discover:
      what:
        - emit_movie_queue: yes
      from:
        - torrentz: verified
        - kat:
            category: movies
            verified: yes
        - piratebay:
            category: 207 # "HD - Movies"
            sort_by: seeds

    # Don't download movies already rated 
    crossmatch:
      from:
        - imdb_list:
            user_id: @IMDB_ID@
            list: ratings
      fields:
        - imdb_id
      action: reject

    # Attempt to prevent bogus downloads
    imdb_required: yes

# Tasks
tasks:
  # Fetch titles from an IMDB watchlist and add to the movie queue
  Watchlist:
    imdb_list:
      list: watchlist
      user_id: @IMDB_ID@
    accept_all: yes
    queue_movies: yes

  Movies:
    template:
      - movies

  TV:
    template:
      - tv
